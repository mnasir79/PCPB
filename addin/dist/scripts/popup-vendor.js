"use strict";angular.module("chromeStorage",[]).factory("chromeStorage",function(e){var r=null;try{r=chrome.storage.local}catch(o){console.log("could not initiate chrome local storage: "+o)}var n=null,t={},c=function(o){var n=e.defer();return r.getBytesInUse(o,function(e){chrome.runtime.lasterror?(console.log("error retrieving bytes in use for keys "+o),n.reject(chrome.runtime.lasterror.message)):(console.log("retrieved bytes in use for keys "+o+": "+e),n.resolve(e))}),n.promise};return{getDebuggingTotalBytesInUse:function(){return n},getDebuggingCache:function(){return t},getDebuggingPercentUsed:function(){var e=n/r.QUOTA_BYTES;return e},getDebuggingSizeOf:function(e){return angular.toJson(t[e]).length},updateDebuggingCache:function(){var o=e.defer();r.get(null,function(e){chrome.runtime.lasterror?o.reject(chrome.runtime.lasterror.message):o.resolve(e)}),o.promise.then(function(e){t=e})},updateDebuggingTotalBytes:function(){c(null).then(function(e){console.log("total bytes in use: "+e),n=e})},clearCache:function(){r.clear(function(){chrome.runtime.lastError?console.error("error clearing local cache"+chrome.runtime.lastError):console.log("cache has been cleared")})},drop:function(e){r.remove(e,function(){chrome.runtime.lasterror&&console.error(chrome.runtime.lasterror.message)})},get:function(o){var n=e.defer();return r.get(o,function(e){var r=e[o];n.resolve(r)}),n.promise},getOrElse:function(o,n){var t=e.defer();return r.get(o,function(e){var c=e[o];void 0==c||null==c?n().then(function(e){c=e;var n={};n[o]=c,r.set(n,function(){chrome.runtime.lasterror&&console.error(chrome.runtime.lasterror.message)}),t.resolve(c)}):t.resolve(c)}),t.promise},set:function(e,o){var n={};n[e]=o,r.set(n,function(){chrome.runtime.lasterror&&console.error(chrome.runtime.lasterror.message)})},forceGet:function(o,n){var t=e.defer();return n().then(function(e){keyValue=e;var n={};n[o]=keyValue,r.set(n,function(){chrome.runtime.lasterror&&console.error(chrome.runtime.lasterror.message)}),t.resolve(keyValue)}),t.promise},getQuota:function(){return r.QUOTA_BYTES}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvcG9wdXAtdmVuZG9yLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHEiLCJhcmVhIiwiY2hyb21lIiwic3RvcmFnZSIsImxvY2FsIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInRvdGFsQnl0ZXMiLCJjYWNoZSIsImdldEJ5dGVzSW5Vc2UiLCJrZXlzIiwiZGVmZXJyZWQiLCJkZWZlciIsImJ5dGVzSW5Vc2UiLCJydW50aW1lIiwibGFzdGVycm9yIiwicmVqZWN0IiwibWVzc2FnZSIsInJlc29sdmUiLCJwcm9taXNlIiwiZ2V0RGVidWdnaW5nVG90YWxCeXRlc0luVXNlIiwiZ2V0RGVidWdnaW5nQ2FjaGUiLCJnZXREZWJ1Z2dpbmdQZXJjZW50VXNlZCIsInBlcmNlbnQiLCJRVU9UQV9CWVRFUyIsImdldERlYnVnZ2luZ1NpemVPZiIsImtleSIsInRvSnNvbiIsImxlbmd0aCIsInVwZGF0ZURlYnVnZ2luZ0NhY2hlIiwiZ2V0IiwidmFsdWUiLCJ0aGVuIiwiZGF0YSIsInVwZGF0ZURlYnVnZ2luZ1RvdGFsQnl0ZXMiLCJjbGVhckNhY2hlIiwiY2xlYXIiLCJsYXN0RXJyb3IiLCJlcnJvciIsImRyb3AiLCJyZW1vdmUiLCJrZXlWYWx1ZSIsImdldE9yRWxzZSIsImZhbGxiYWNrIiwidW5kZWZpbmVkIiwic2F2ZU9iamVjdCIsInNldCIsImZvcmNlR2V0IiwiZ2V0UXVvdGEiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUFBLFNBQVFDLE9BQU8sb0JBQ2JDLFFBQVEsZ0JBQWlCLFNBQVNDLEdBQ25DLEdBQUlDLEdBQU8sSUFDWCxLQUNDQSxFQUFPQyxPQUFPQyxRQUFRQyxNQUNyQixNQUFPQyxHQUNSQyxRQUFRQyxJQUFJLDRDQUE4Q0YsR0FNM0QsR0FBSUcsR0FBYSxLQUNiQyxLQU1BQyxFQUFnQixTQUFVQyxHQUMxQixHQUFJQyxHQUFXWixFQUFHYSxPQWFsQixPQVhBWixHQUFLUyxjQUFjQyxFQUFNLFNBQVNHLEdBQzFCWixPQUFPYSxRQUFRQyxXQUNsQlYsUUFBUUMsSUFBSSwwQ0FBNENJLEdBQ3JEQyxFQUFTSyxPQUFPZixPQUFPYSxRQUFRQyxVQUFVRSxXQUc1Q1osUUFBUUMsSUFBSSxtQ0FBcUNJLEVBQU8sS0FBT0csR0FDNURGLEVBQVNPLFFBQVFMLE1BSWxCRixFQUFTUSxRQUdsQixRQUNDQyw0QkFBNkIsV0FDNUIsTUFBT2IsSUFFWGMsa0JBQW1CLFdBQ2xCLE1BQU9iLElBS1JjLHdCQUF5QixXQUN4QixHQUFJQyxHQUFVaEIsRUFBYVAsRUFBS3dCLFdBQ2hDLE9BQU9ELElBRVJFLG1CQUFvQixTQUFTQyxHQUM1QixNQUFPOUIsU0FBUStCLE9BQU9uQixFQUFNa0IsSUFBTUUsUUFFbkNDLHFCQUFzQixXQUNyQixHQUFJbEIsR0FBV1osRUFBR2EsT0FDbEJaLEdBQUs4QixJQUFJLEtBQU0sU0FBVUMsR0FDcEI5QixPQUFPYSxRQUFRQyxVQUNUSixFQUFTSyxPQUFPZixPQUFPYSxRQUFRQyxVQUFVRSxTQUd6Q04sRUFBU08sUUFBUWEsS0FHNUJwQixFQUFTUSxRQUFRYSxLQUFNLFNBQVVDLEdBQ2hDekIsRUFBUXlCLEtBR1ZDLDBCQUEyQixXQUMxQnpCLEVBQWMsTUFBTXVCLEtBQUssU0FBU0MsR0FDakM1QixRQUFRQyxJQUFJLHVCQUF5QjJCLEdBQ3JDMUIsRUFBYTBCLEtBR1pFLFdBQVksV0FFZG5DLEVBQUtvQyxNQUFNLFdBQ05uQyxPQUFPYSxRQUFRdUIsVUFDWmhDLFFBQVFpQyxNQUFNLDZCQUErQnJDLE9BQU9hLFFBQVF1QixXQUUvRGhDLFFBQVFDLElBQUksNkJBSWxCaUMsS0FBTSxTQUFTYixHQUNkMUIsRUFBS3dDLE9BQU9kLEVBQUssV0FDWnpCLE9BQU9hLFFBQVFDLFdBQ1RWLFFBQVFpQyxNQUFNckMsT0FBT2EsUUFBUUMsVUFBVUUsWUFNbkRhLElBQUssU0FBU0osR0FDYixHQUFJZixHQUFXWixFQUFHYSxPQU1sQixPQUxBWixHQUFLOEIsSUFBSUosRUFBSyxTQUFVSyxHQUVqQixHQUFJVSxHQUFXVixFQUFNTCxFQUNsQmYsR0FBU08sUUFBUXVCLEtBRXBCOUIsRUFBU1EsU0FNakJ1QixVQUFXLFNBQVNoQixFQUFLaUIsR0FFeEIsR0FBSWhDLEdBQVdaLEVBQUdhLE9Bd0JsQixPQXZCTVosR0FBSzhCLElBQUlKLEVBQUssU0FBU0ssR0FFdEIsR0FBSVUsR0FBV1YsRUFBTUwsRUFDTGtCLFNBQVpILEdBQXFDLE1BQVpBLEVBRTVCRSxJQUFXWCxLQUFLLFNBQVNDLEdBQ3hCUSxFQUFXUixDQUVYLElBQUlZLEtBQ0pBLEdBQVduQixHQUFPZSxFQUNsQnpDLEVBQUs4QyxJQUFJRCxFQUFZLFdBQ2hCNUMsT0FBT2EsUUFBUUMsV0FDZlYsUUFBUWlDLE1BQU1yQyxPQUFPYSxRQUFRQyxVQUFVRSxXQUs1Q04sRUFBU08sUUFBUXVCLEtBR2xCOUIsRUFBU08sUUFBUXVCLEtBR2xCOUIsRUFBU1EsU0FLakIyQixJQUFLLFNBQVNwQixFQUFLSyxHQUNsQixHQUFJYyxLQUNKQSxHQUFXbkIsR0FBT0ssRUFDbEIvQixFQUFLOEMsSUFBSUQsRUFBWSxXQUNoQjVDLE9BQU9hLFFBQVFDLFdBQ2ZWLFFBQVFpQyxNQUFNckMsT0FBT2EsUUFBUUMsVUFBVUUsWUFXN0M4QixTQUFVLFNBQVNyQixFQUFLaUIsR0FFdkIsR0FBSWhDLEdBQVdaLEVBQUdhLE9BZWxCLE9BZE0rQixLQUFXWCxLQUFLLFNBQVNDLEdBQzlCUSxTQUFXUixDQUVYLElBQUlZLEtBQ0pBLEdBQVduQixHQUFPZSxTQUNsQnpDLEVBQUs4QyxJQUFJRCxFQUFZLFdBQ2hCNUMsT0FBT2EsUUFBUUMsV0FDVFYsUUFBUWlDLE1BQU1yQyxPQUFPYSxRQUFRQyxVQUFVRSxXQUtsRE4sRUFBU08sUUFBUXVCLFlBRVg5QixFQUFTUSxTQUtqQjZCLFNBQVUsV0FDVCxNQUFPaEQsR0FBS3dCIiwiZmlsZSI6InNjcmlwdHMvcG9wdXAtdmVuZG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZShcImNocm9tZVN0b3JhZ2VcIixbXSlcblx0LmZhY3RvcnkoJ2Nocm9tZVN0b3JhZ2UnLCBmdW5jdGlvbigkcSkge1xuXHR2YXIgYXJlYSA9IG51bGw7XG5cdHRyeSB7XG5cdFx0YXJlYSA9IGNocm9tZS5zdG9yYWdlLmxvY2FsOyAvLyBjaGFuZ2UgdGhpcyB0byBjaHJvbWUuc3RvcmFnZS5zeW5jIGZvciBzeW5jIGNhcGFiaWxpdGllc1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRjb25zb2xlLmxvZyhcImNvdWxkIG5vdCBpbml0aWF0ZSBjaHJvbWUgbG9jYWwgc3RvcmFnZTogXCIgKyBlcnIpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZXNlIGFyZSBwcm92aWRlZCBhbmQgdXBkYXRlZCBvbmx5IGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG5cdCAqL1xuXHR2YXIgdG90YWxCeXRlcyA9IG51bGw7XG5cdHZhciBjYWNoZSA9IHt9O1xuXG5cdC8qKlxuXHQgKiBBIGNhbGwgdG8gZ2V0IHRoZSBieXRlcyBpbiB1c2UsIHJldHVybnMgYSBwcm9taXNlIG9mIHRoZSBzaXplIG9mIGFuIGluZGl2aWR1YWwga2V5LCBvclxuXHQgKiBvZiB0b3RhbCBieXRlcyBpbiB1c2UsIGlmIG5vIGtleSBpcyBzcGVjaWZpZWQuXG5cdCAqL1xuXHR2YXIgZ2V0Qnl0ZXNJblVzZSA9IGZ1bmN0aW9uIChrZXlzKXtcblx0ICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0ICAgIGFyZWEuZ2V0Qnl0ZXNJblVzZShrZXlzLCBmdW5jdGlvbihieXRlc0luVXNlKSB7XG5cdCAgICAgICAgaWYgKGNocm9tZS5ydW50aW1lLmxhc3RlcnJvcil7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyhcImVycm9yIHJldHJpZXZpbmcgYnl0ZXMgaW4gdXNlIGZvciBrZXlzIFwiICsga2V5cyk7XG5cdCAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChjaHJvbWUucnVudGltZS5sYXN0ZXJyb3IubWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgIFx0Y29uc29sZS5sb2coXCJyZXRyaWV2ZWQgYnl0ZXMgaW4gdXNlIGZvciBrZXlzIFwiICsga2V5cyArIFwiOiBcIiArIGJ5dGVzSW5Vc2UpO1xuXHQgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGJ5dGVzSW5Vc2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0fVxuXG4gICByZXR1cm4ge1xuICAgXHRnZXREZWJ1Z2dpbmdUb3RhbEJ5dGVzSW5Vc2U6IGZ1bmN0aW9uKCkge1xuICAgXHRcdHJldHVybiB0b3RhbEJ5dGVzO1xuICAgXHR9LFxuXHRnZXREZWJ1Z2dpbmdDYWNoZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgdXNhZ2Ugb2YgdGhlIGN1cnJlbnQgc3RvcmFnZSBxdW90YSwgYXMgYSBudW1iZXIgYmV0d2VlbiAwLjAgYW5kIDEuMFxuXHQgKi9cblx0Z2V0RGVidWdnaW5nUGVyY2VudFVzZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBwZXJjZW50ID0gdG90YWxCeXRlcyAvIGFyZWEuUVVPVEFfQllURVM7XG5cdFx0cmV0dXJuIHBlcmNlbnQ7XG5cdH0sXG5cdGdldERlYnVnZ2luZ1NpemVPZjogZnVuY3Rpb24oa2V5KSB7XG5cdFx0cmV0dXJuIGFuZ3VsYXIudG9Kc29uKGNhY2hlW2tleV0pLmxlbmd0aDtcblx0fSxcblx0dXBkYXRlRGVidWdnaW5nQ2FjaGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0YXJlYS5nZXQobnVsbCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRpZiAoY2hyb21lLnJ1bnRpbWUubGFzdGVycm9yKXtcblx0ICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGNocm9tZS5ydW50aW1lLmxhc3RlcnJvci5tZXNzYWdlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy9jb25zb2xlLmxvZygnZ2V0IHRoZW4gZm9yIGFsbCBrZXlzIDogJyArIGFuZ3VsYXIudG9Kc29uKHZhbHVlKSk7XG4gIFx0ICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xuICBcdCAgICAgICAgfVxuXHRcdH0pO1xuXHRcdGRlZmVycmVkLnByb21pc2UudGhlbiAoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdGNhY2hlID0gZGF0YTtcblx0XHR9KTtcblx0fSxcblx0dXBkYXRlRGVidWdnaW5nVG90YWxCeXRlczogZnVuY3Rpb24oKSB7XG5cdFx0Z2V0Qnl0ZXNJblVzZShudWxsKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwidG90YWwgYnl0ZXMgaW4gdXNlOiBcIiArIGRhdGEpO1xuXHRcdFx0dG90YWxCeXRlcyA9IGRhdGE7XG5cdFx0fSk7XG5cdH0sXG4gICAgY2xlYXJDYWNoZTogZnVuY3Rpb24oKSB7XG5cdFx0Ly8gY29uc29sZS5sb2coJ2NsZWFyaW5nIGxvY2FsIGNhY2hlJyk7XG5cdFx0YXJlYS5jbGVhcihmdW5jdGlvbigpIHtcblx0XHRcdGlmIChjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcblx0XHQgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBjbGVhcmluZyBsb2NhbCBjYWNoZVwiICsgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKTtcblx0XHQgICAgfSBlbHNlIHtcblx0ICAgIFx0XHRjb25zb2xlLmxvZyhcImNhY2hlIGhhcyBiZWVuIGNsZWFyZWRcIik7XG5cdCAgICBcdH1cblx0XHR9KTtcblx0fSxcblx0ZHJvcDogZnVuY3Rpb24oa2V5KSB7XG5cdFx0YXJlYS5yZW1vdmUoa2V5LCBmdW5jdGlvbigpe1xuXHRcdFx0aWYgKGNocm9tZS5ydW50aW1lLmxhc3RlcnJvcil7XG5cdCAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2hyb21lLnJ1bnRpbWUubGFzdGVycm9yLm1lc3NhZ2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgXHQvLyBjb25zb2xlLmxvZyhcImtleSBcIiArIGtleSArIFwiIGhhcyBiZWVuIGRyb3BwZWQgZnJvbSB0aGUgc3RvcmFnZSBjYWNoZVwiKVxuXHQgICAgICAgIH1cblx0XHR9KTtcblx0fSxcblx0Z2V0OiBmdW5jdGlvbihrZXkpIHtcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHRcdGFyZWEuZ2V0KGtleSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIFx0Ly8gY29uc29sZS5sb2coJ2dldFRvdGFsQnl0ZXNJblVzZSB0aGVuIHdpdGgga2V5ICcgKyBrZXkgKyBcIiA6IFwiICsgYW5ndWxhci50b0pzb24odmFsdWUpKTtcbiAgICAgICAgXHR2YXIga2V5VmFsdWUgPSB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShrZXlWYWx1ZSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdH0sXG5cdC8qKlxuXHQgKiBnZXRzIHRoZSB2YWx1ZSBvZiBrZXkgZnJvbSB0aGUgY2FjaGUsIG9yIGNhbGxzIHRoZSBmYWxsYmFjayBmdW5jdGlvbiwgYW5kIHBvcHVsYXRlcyB0aGUgY2FjaGVcblx0ICogd2l0aCB0aGUgdmFsdWUgb2YgdGhlIHByb21pc2UgcmV0dXJuZWRcblx0ICovXG5cdGdldE9yRWxzZTogZnVuY3Rpb24oa2V5LCBmYWxsYmFjaykge1xuXHRcdC8vIGNvbnNvbGUubG9nKCdnZXRPckVsc2UgY2FsbGVkIHdpdGggIGNhY2hlZCBrZXkgJyArIGtleSk7XG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgYXJlYS5nZXQoa2V5LCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBcdC8vIGNvbnNvbGUubG9nKCdnZXRPckVsc2UgdGhlbiB3aXRoIGNhY2hlZCBrZXkgJyArIGtleSArIFwiIDogXCIgKyBhbmd1bGFyLnRvSnNvbih2YWx1ZSkpO1xuICAgICAgICBcdHZhciBrZXlWYWx1ZSA9IHZhbHVlW2tleV07XG4gICAgICAgIFx0aWYgKGtleVZhbHVlID09IHVuZGVmaW5lZCB8fCBrZXlWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIFx0XHQvLyBjb25zb2xlLmxvZyhcIm5vIGNhY2hlZCB2YWx1ZSBmb3IgXCIrIGtleSArIFwiLiB1c2luZyBmYWxsYmFjayBtZXRob2QuXCIpO1xuICAgICAgICBcdFx0ZmFsbGJhY2soKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgXHRcdFx0a2V5VmFsdWUgPSBkYXRhO1xuICAgICAgICBcdFx0XHQvLyBjb25zb2xlLmxvZyhcImNhY2hpbmcgdmFsdWUgZm9yIFwiKyBrZXkgKyBcIiA6IFwiICsgYW5ndWxhci50b0pzb24oa2V5VmFsdWUpKTtcbiAgICAgICAgXHRcdFx0dmFyIHNhdmVPYmplY3QgPSB7fTtcbiAgICAgICAgXHRcdFx0c2F2ZU9iamVjdFtrZXldID0ga2V5VmFsdWU7XG4gICAgICAgIFx0XHRcdGFyZWEuc2V0KHNhdmVPYmplY3QsIGZ1bmN0aW9uKCkge1xuICAgICAgICBcdFx0XHRcdGlmIChjaHJvbWUucnVudGltZS5sYXN0ZXJyb3Ipe1xuXHRcdFx0XHQgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNocm9tZS5ydW50aW1lLmxhc3RlcnJvci5tZXNzYWdlKTtcblx0XHRcdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICBcdFx0XHRcdC8vY29uc29sZS5sb2coJ3NhdmVkICcgKyBrZXlWYWx1ZSArIFwiIHRvIGtleSBcIiArIGtleSk7XG5cdFx0ICAgIFx0XHRcdH1cbiAgICAgICAgXHRcdFx0fSk7XG4gICAgICAgIFx0XHRcdGRlZmVycmVkLnJlc29sdmUoa2V5VmFsdWUpO1xuICAgICAgICBcdFx0fSk7XG4gICAgICAgIFx0fSBlbHNlIHtcblx0ICAgICAgICBcdGRlZmVycmVkLnJlc29sdmUoa2V5VmFsdWUpO1xuXHQgICAgICAgIH1cbiAgICAgICAgfSk7XG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdH0sXG5cdC8qKlxuXHQqXG5cdCovXG5cdHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdHZhciBzYXZlT2JqZWN0ID0ge307XG5cdFx0c2F2ZU9iamVjdFtrZXldID0gdmFsdWU7XG5cdFx0YXJlYS5zZXQoc2F2ZU9iamVjdCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoY2hyb21lLnJ1bnRpbWUubGFzdGVycm9yKXtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihjaHJvbWUucnVudGltZS5sYXN0ZXJyb3IubWVzc2FnZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnc2F2ZWQgJyArIGtleVZhbHVlICsgXCIgdG8ga2V5IFwiICsga2V5KTtcblx0XHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBnZXRzIHRoZSB2YWx1ZSBvZiBrZXkgZnJvbSB0aGUgY2FjaGUsIG9yIGNhbGxzIHRoZSBmYWxsYmFjayBmdW5jdGlvbiwgYW5kIHBvcHVsYXRlcyB0aGUgY2FjaGVcblx0ICogd2l0aCB0aGUgdmFsdWUgb2YgdGhlIHByb21pc2UgcmV0dXJuZWRcblx0ICovXG5cdGZvcmNlR2V0OiBmdW5jdGlvbihrZXksIGZhbGxiYWNrKSB7XG5cdFx0Ly8gY29uc29sZS5sb2coJ2dldE9yRWxzZSBjYWxsZWQgd2l0aCAgY2FjaGVkIGtleSAnICsga2V5KTtcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBmYWxsYmFjaygpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0a2V5VmFsdWUgPSBkYXRhO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJjYWNoaW5nIHZhbHVlIGZvciBcIisga2V5ICsgXCIgOiBcIiArIGFuZ3VsYXIudG9Kc29uKGtleVZhbHVlKSk7XG5cdFx0XHR2YXIgc2F2ZU9iamVjdCA9IHt9O1xuXHRcdFx0c2F2ZU9iamVjdFtrZXldID0ga2V5VmFsdWU7XG5cdFx0XHRhcmVhLnNldChzYXZlT2JqZWN0LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKGNocm9tZS5ydW50aW1lLmxhc3RlcnJvcil7XG5cdFx0ICAgICAgICAgICAgY29uc29sZS5lcnJvcihjaHJvbWUucnVudGltZS5sYXN0ZXJyb3IubWVzc2FnZSk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuICAgIFx0XHRcdFx0Ly9jb25zb2xlLmxvZygnc2F2ZWQgJyArIGtleVZhbHVlICsgXCIgdG8ga2V5IFwiICsga2V5KTtcbiAgICBcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGRlZmVycmVkLnJlc29sdmUoa2V5VmFsdWUpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHR9LFxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgcXVvdGEgb2YgdGhlIGN1cnJlbnQgc3RvcmFnZSBtZXRob2QsIGluIGJ5dGVzXG5cdCAqL1xuXHRnZXRRdW90YTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGFyZWEuUVVPVEFfQllURVM7XG5cdH1cblxuICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
